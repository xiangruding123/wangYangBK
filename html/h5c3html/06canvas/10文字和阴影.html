<!DOCTYPE HTML>
<html>

	<head>
		<meta charset="utf-8">
		<title>canvas</title>
		<style>
			#myCanvas {
				border: 1px solid gray;
			}
		</style>
	</head>

	<body>
		<canvas id="myCanvas" width="400" height="400"></canvas><br>
		<input type="button" id="btn" value="btn">
		<script>
			var canvas = document.getElementById("myCanvas");
			var ctx = canvas.getContext("2d");
			/*
			with(ctx){ 
				shadowOffsetX = 5; 
				shadowOffsetY = 5; 
				shadowColor = "#0000FF"; 
				shadowBlur = 5; 
				fillStyle = "red"; 
				fillRect(50,50,200,100); 
			}

			ctx.shadowOffsetX = 0; 
			ctx.shadowOffsetY = 0;
			ctx.shadowColor = "blue";
			ctx.shadowBlur = 10;

			ctx.fillStyle = "red"; 
			ctx.fillRect(50,50,200,100); 
			*/
			//var lg = ctx.createLinearGradient(0,0,60,0);
			//lg.addColorStop(0,"red");
			//lg.addColorStop(1,"blue");
			//ctx.strokeStyle = lg;
			//ctx.fillStyle = "red";
			//ctx.font = "italic bold 130px microsoft yahei";
			//ctx.textBaseline = "top";
			//ctx.strokeText("text",5,5);
			//ctx.fillText("text",0,0);

			ctx.fillStyle = "red";
			//ctx.rect(50,50,200,100); 
			//ctx.fill();
			ctx.save();

			//ctx.beginPath(); 
			ctx.fillStyle = "blue";
			//ctx.rect(0,0,100,100); 
			//ctx.closePath(); 
			ctx.restore();

			//ctx.fillStyle = "yellow"; 
			//ctx.translate(100,100);	
			//ctx.fillRect(50,50,200,100); 
			ctx.rect(50, 50, 200, 100);
			ctx.fill();

			console.log(canvas.toDataURL("image/png"));

			btn.onclick = function() {
				//window.open(canvas.toDataURL("image/png"),"smallwin","width=400,height=300");
				var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
				window.location.href = image;

			}
		</script>
	</body>

</html>